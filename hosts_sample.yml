all:
  vars:
    ansible_become: false
    # configure connectivity for topics management
    rest_server_url: https://kafka1.confluent.io:8090
    rest_user: user
    rest_user_password: user-secret
# get cluster id >confluent cluster describe --url https://url:<port> -ojson | jq -r '.crn'      
    cluster_id: 
# properties for Kafka command line use - needed only for partitions_count increase and quota management     
    kafka_broker_hostname: kafka1.confluent.io
    kafka_broker_port: 9091
# add configuration file details for client connectivity to the cluster    
    kafka_broker_client_config_file: ./settings/client.properties
# provide secrets protection key if applicable    
    secrets_protection_masterkey: blahblah
# path to binaries    
    binary_base_path: /home/confluent/confluent-7.0.1    

# sample desired topics state structure      
    topics:
# here is config change - value change and value delete    
      - topic_name: test
        partitions_count: 6
        replication_factor: 3
        configs:
          - name: min.insync.replicas
            value: "2"
      - topic_name: test2
# here is partitions_count increase      
        partitions_count: 6
        replication_factor: 3
        configs:
          - name: min.insync.replicas
            value: "1"
          - name: retention.ms
            value: "60480000"
# test3 - to delete           
      - topic_name: test5
# here is topic to be added      
        partitions_count: 6
        replication_factor: 3
        configs:
          - name: min.insync.replicas
            value: "2"
          - name: retention.ms
            value: "604800000"
      - topic_name: test6
# here is topic to be added      
        partitions_count: 6
        replication_factor: 3
        configs:
          - name: min.insync.replicas
            value: "2"
          - name: retention.ms
            value: "60480000"
# rbac section
# connectivity for the MDS connection - the user must be SystemAdmin 
    mds_user: mds
    mds_user_password: mds
    mds_server_url: https://kafka1.confluent.io:8090

# sample desired rolebindings state configuration   
    rolebindings:
    - clusterName: test-cluster
      name: test-cluster-0
      principal: User:connectAdmin
      resources:
      - name: _confluent-monitoring
        patternType: PREFIXED
        resourceType: Topic
      role: DeveloperWrite
    - clusterName: test-cluster
      name: test-cluster-1
      principal: User:connectAdmin
      resources:
      - name: operator.connect
        patternType: LITERAL
        resourceType: Group
      - name: operator.connect-
        patternType: PREFIXED
        resourceType: Topic
      role: ResourceOwner
    - clusterName: test-cluster
      name: test-cluster-2
      principal: User:ksqlDBAdmin
      resources:
      - name: kafka-cluster
        patternType: LITERAL
        resourceType: Cluster
      - name: operator.ksqldb_
        patternType: PREFIXED
        resourceType: TransactionalId
      role: DeveloperWrite
    - clusterName: test-cluster
      name: test-cluster-3
      principal: User:ksqlDBAdmin
      resources:
      - name: _confluent-ksql-operator.ksqldb_
        patternType: PREFIXED
        resourceType: Group
      - name: _confluent-ksql-operator.ksqldb__command_topic
        patternType: LITERAL
        resourceType: Topic
      - name: operator.ksqldb_ksql_processing_log
        patternType: LITERAL
        resourceType: Topic
      role: ResourceOwner
    - clusterName: test-cluster
      name: test-cluster-4
      principal: User:schemaregistryUser
      resources:
      - name: id_schemaregistry_operator
        patternType: LITERAL
        resourceType: Group
      - name: _confluent-license
        patternType: LITERAL
        resourceType: Topic
      - name: _schemas_schemaregistry_operator
        patternType: LITERAL
        resourceType: Topic
      role: ResourceOwner
    - clusterName: test-cluster
      name: test-cluster-5
      principal: User:controlcenterAdmin
      role: SystemAdmin
    - clusterName: test-cluster
      name: test-cluster-6
      principal: User:superUser
      role: SystemAdmin
    - name: test-cluster-7
      clusterName: test-cluster
      principal: User:alice
      resources:
      - name: test
        patternType: PREFIXED
        resourceType: Topic
      # - name: test
      #   patternType: PREFIXED
      #   resourceType: Group
      role: ResourceOwner
    - name: test-cluster-8
      clusterName: test-cluster
      principal: User:bob
      role: SystemAdmin

# quotas management connectivity defined above
# sample desired quotas state structure
    quotas:
      - client_id: test
        consumer_byte_rate: 100002.0
        producer_byte_rate: 100001.0
        # request_percentage: 30.0
      # - client_id: test2
      #   consumer_byte_rate: 100002.0
      #   producer_byte_rate: 100001.0
      - client_id: test3
        consumer_byte_rate: 100003.0
        producer_byte_rate: 100003.0
        request_percentage: 20.0
      - client_id: test4
        consumer_byte_rate: 100004.0
        producer_byte_rate: 100004.0
        request_percentage: 20.0
